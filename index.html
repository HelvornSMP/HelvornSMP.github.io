<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>HelvornSMP</title>

<style>
:root{
--bg:#0b0b0b;
--card:#141414;
--accent:#c9b458;
--text:#eaeaea;
--muted:#a0a0a0;
}

body{
background:radial-gradient(circle at top,#1a1a1a,var(--bg));
color:var(--text);
font-family:system-ui;
margin:0;
}

.container{
max-width:1100px;
margin:auto;
padding:40px 20px;
display:grid;
grid-template-columns:repeat(auto-fit,minmax(260px,1fr));
gap:20px;
}

.card{
background:linear-gradient(180deg,#191919,var(--card));
border-radius:18px;
padding:25px;
text-align:center;
}

button{
padding:12px;
border-radius:10px;
border:none;
cursor:pointer;
font-weight:bold;
}

.crateBtn{
background:var(--accent);
color:black;
width:100%;
}

.copyBtn{
margin-top:10px;
background:none;
border:2px solid var(--accent);
color:var(--accent);
width:100%;
}

.spinner{
font-size:18px;
margin:15px 0;
height:24px;
}

.common{color:#bbb;}
.uncommon{color:#55ff55;}
.rare{color:#55ffff;}
.ultra{color:#ff55ff;}
.legendary{color:#ffaa00;}

</style>
</head>

<body>

<div class="container">

<div class="card">
<h2>üéÅ Daily Crate</h2>

<button class="crateBtn" onclick="openCrate()">Open Crate</button>

<div class="spinner" id="spinner"></div>

<p id="crateResult"></p>

<button class="copyBtn" id="copyBtn" style="display:none;">Copy Code</button>

<p id="timer" style="margin-top:10px;color:#aaa;"></p>

</div>

</div>

<script>

// ===== LOOT TABLE =====
const loot=[
{item:"Diamond x6",rarity:"Uncommon"},
{item:"Totem of Undying",rarity:"Rare"},
{item:"Elytra",rarity:"Ultra Rare"},
{item:"Beacon",rarity:"Legendary"},
{item:"Nether Star",rarity:"Legendary"},
{item:"Shulker Box",rarity:"Ultra Rare"},
{item:"Enchanted Golden Apple",rarity:"Rare"},
{item:"Iron Ingot x16",rarity:"Common"}
];

const weights={
"Common":50,
"Uncommon":25,
"Rare":15,
"Ultra Rare":8,
"Legendary":2
};

let lastCode="";

// ===== WEIGHTED PICK =====
function pickItem(){
let list=[];
loot.forEach(i=>{
for(let x=0;x<weights[i.rarity];x++) list.push(i);
});
return list[Math.floor(Math.random()*list.length)];
}

// ===== CODE GEN =====
function makeCode(item,rarity){
const d=new Date();
const time=d.toISOString().slice(2,16).replace(/[-T:]/g,"");
const salt=Math.random().toString(36).substring(2,6).toUpperCase();
return `HEL-${time}-${rarity}-${item}-${salt}`;
}

// ===== TIMER =====
function updateTimer(){
const last=localStorage.getItem("crateTime");
if(!last) return;

const remaining=86400000-(Date.now()-last);

if(remaining<=0){
document.getElementById("timer").textContent="‚úÖ Crate Ready!";
return;
}

let h=Math.floor(remaining/3600000);
let m=Math.floor((remaining%3600000)/60000);
let s=Math.floor((remaining%60000)/1000);

document.getElementById("timer").textContent=
`Next crate in ${h}h ${m}m ${s}s`;
}

setInterval(updateTimer,1000);

// ===== SPIN ANIMATION =====
function spinAnimation(callback){

const spin=document.getElementById("spinner");

let items=loot.map(l=>l.item);
let i=0;

const interval=setInterval(()=>{
spin.textContent=items[Math.floor(Math.random()*items.length)];
i++;

if(i>20){
clearInterval(interval);
callback();
}

},100);
}

// ===== OPEN CRATE =====
function openCrate(){

const last=localStorage.getItem("crateTime");
if(last && Date.now()-last<86400000){
updateTimer();
return;
}

spinAnimation(()=>{

const reward=pickItem();
const code=makeCode(reward.item,reward.rarity);

lastCode=code;

localStorage.setItem("crateTime",Date.now());

let rarityClass=
reward.rarity==="Common"?"common":
reward.rarity==="Uncommon"?"uncommon":
reward.rarity==="Rare"?"rare":
reward.rarity==="Ultra Rare"?"ultra":"legendary";

document.getElementById("crateResult").innerHTML=
`üéâ You got: <span class="${rarityClass}">${reward.item}</span>
<br><br>Code:<br>${code}`;

document.getElementById("copyBtn").style.display="block";
updateTimer();

});
}

// ===== COPY BUTTON =====
document.getElementById("copyBtn").onclick=()=>{
navigator.clipboard.writeText(lastCode);
alert("Code copied!");
};

updateTimer();

</script>

</body>
</html>
