<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8" />
<meta name="viewport" content="width=device-width, initial-scale=1.0" />
<title>HelvornSMP ‚Ä¢ Anarchy Survival</title>

<style>
:root{
  --bg:#0b0b0b;
  --card:#141414;
  --accent:#c9b458;
  --text:#eaeaea;
  --muted:#a0a0a0;
}

*{box-sizing:border-box;margin:0;padding:0;}

body{
  background:radial-gradient(circle at top,#1a1a1a,var(--bg));
  color:var(--text);
  font-family:system-ui;
}

header{
  min-height:100vh;
  display:flex;
  align-items:center;
  justify-content:center;
  text-align:center;
  padding:40px 20px;
}

.hero h1{
  font-size:clamp(3rem,8vw,5rem);
  color:var(--accent);
}

.hero p{color:var(--muted);margin:15px 0;}

.buttons{
  display:flex;
  gap:15px;
  justify-content:center;
  flex-wrap:wrap;
}

.btn{
  padding:14px 28px;
  border-radius:10px;
  font-weight:600;
  cursor:pointer;
  border:none;
}

.primary{
  background:var(--accent);
  color:black;
}

.secondary{
  border:2px solid var(--accent);
  color:var(--accent);
  background:none;
}

/* Admin button */
.admin-btn{
  margin-top:15px;
  background:var(--accent);
  color:black;
  border:none;
  padding:14px 28px;
  border-radius:10px;
  font-weight:bold;
  cursor:pointer;
  transition:0.3s;
}
.admin-btn:hover{
  transform:scale(1.05);
  background:#ffd633;
}

section{
  padding:80px 20px;
  display:flex;
  justify-content:center;
}

.container{
  max-width:1100px;
  width:100%;
  display:grid;
  grid-template-columns:repeat(auto-fit,minmax(260px,1fr));
  gap:20px;
}

.card{
  background:linear-gradient(180deg,#191919,var(--card));
  border-radius:18px;
  padding:25px;
  box-shadow:0 10px 30px rgba(0,0,0,.4);
  text-align:center;
}

.card h2{color:var(--accent);margin-bottom:10px;}
.card p,.card li{color:var(--muted);font-size:.95rem;}
ul{padding-left:18px;text-align:left;}

.ip-box{
  background:#0f0f0f;
  border:2px dashed var(--accent);
  padding:15px;
  border-radius:12px;
  margin-top:10px;
  font-family:monospace;
  color:var(--accent);
}

/* crate */
.crateBtn{
  margin-top:15px;
  width:100%;
  padding:12px;
  font-weight:bold;
  background:var(--accent);
  color:black;
  border:none;
  border-radius:10px;
  cursor:pointer;
}

.copyBtn{
  margin-top:10px;
  width:100%;
  padding:10px;
  border-radius:10px;
  border:2px solid var(--accent);
  background:none;
  color:var(--accent);
  cursor:pointer;
}

.spinner{
  height:22px;
  margin:10px 0;
}

/* rarity colors */
.common{color:#bbb;}
.uncommon{color:#55ff55;}
.rare{color:#55ffff;}
.ultra{color:#ff55ff;}
.legendary{color:#ffaa00;}

footer{
  text-align:center;
  padding:30px;
  color:var(--muted);
  border-top:1px solid #222;
}
</style>
</head>

<body>

<header>
<div class="hero">
<h1>HELVORNSMP</h1>
<p>Java & Bedrock ‚Ä¢ Anarchy Survival ‚Ä¢ No Hacks</p>

<div class="buttons">
<a class="btn primary" href="#join">Join Server</a>
<a class="btn secondary" href="https://discord.gg/4H3Cgj77DH" target="_blank">Discord</a>
</div>

<!-- Admin button -->
<a href="admin.html"><button class="admin-btn">üõ° Admin Panel</button></a>

<div style="margin-top:30px;">
<strong>Server Status:</strong>
<div id="status" style="margin-top:10px;color:var(--accent)">Checking‚Ä¶</div>
</div>

</div>
</header>

<section id="join">
<div class="container">

<div class="card">
<h2>Server Info</h2>
<p>Pure anarchy survival. Griefing allowed. No hacking.</p>

<div class="ip-box">Java IP: <span id="java-ip">helvornsmp.playserver.pro</span></div>
<button class="btn secondary" onclick="copyIP('java-ip')">Copy Java IP</button>

<div class="ip-box" style="margin-top:15px;">Bedrock: <span id="bedrock-ip">helvornsmp.playserver.pro:35098</span></div>
<button class="btn secondary" onclick="copyIP('bedrock-ip')">Copy Bedrock</button>
</div>

<div class="card">
<h2>Why Helvorn?</h2>
<ul>
<li>Java + Bedrock Crossplay</li>
<li>Cracked Support</li>
<li>Active Admins</li>
<li>True Anarchy</li>
</ul>
</div>

<div class="card">
<h2>How To Start Server</h2>
<ul>
<li>Try joining</li>
<li>Cancel connection</li>
<li>Wait for server to wake</li>
<li>Join again</li>
</ul>
</div>

<!-- CRATE CARD -->
<div class="card">
<h2>üéÅ Daily Crate</h2>
<button class="crateBtn" onclick="openCrate()">Open Crate</button>
<div class="spinner" id="spinner"></div>
<p id="crateResult"></p>
<button class="copyBtn" id="copyBtn" style="display:none;">Copy Code</button>
<button class="crateBtn" id="submitBtn" style="display:none;">Submit Claim</button>
<p id="timer"></p>
</div>

</div>
</section>

<footer>
¬© 2026 HelvornSMP
</footer>

<script>
/* server status */
function updateStatus(){
fetch("https://api.mcsrvstat.us/2/helvornsmp.playserver.pro")
.then(r=>r.json())
.then(data=>{
status.textContent=data.online?"üü¢ Reachable":"üî¥ Sleeping";
});
}
updateStatus();
setInterval(updateStatus,30000);

/* copy ip */
function copyIP(id){
navigator.clipboard.writeText(document.getElementById(id).textContent);
alert("Copied!");
}

/* loot */
const loot=[
{item:"Diamond x6",rarity:"Uncommon"},
{item:"Totem of Undying",rarity:"Rare"},
{item:"Elytra",rarity:"Ultra Rare"},
{item:"Beacon",rarity:"Legendary"},
{item:"Nether Star",rarity:"Legendary"},
{item:"Shulker Box",rarity:"Ultra Rare"},
{item:"Enchanted Golden Apple",rarity:"Rare"},
{item:"Iron Ingot x16",rarity:"Common"}
];

const weights={
"Common":50,
"Uncommon":25,
"Rare":15,
"Ultra Rare":8,
"Legendary":2
};

let lastCode="";

/* weighted pick */
function pickItem(){
let list=[];
loot.forEach(i=>{
for(let x=0;x<weights[i.rarity];x++) list.push(i);
});
return list[Math.floor(Math.random()*list.length)];
}

/* code gen */
function makeCode(item,rarity){
const d=new Date();
const time=d.toISOString().slice(2,16).replace(/[-T:]/g,"");
const salt=Math.random().toString(36).substring(2,6).toUpperCase();
return `HEL-${time}-${rarity}-${item}-${salt}`;
}

/* timer */
function updateTimer(){
const last=localStorage.getItem("crateTime");
if(!last)return;

const remaining=86400000-(Date.now()-last);
if(remaining<=0){timer.textContent="‚úÖ Crate Ready!";return;}

let h=Math.floor(remaining/3600000);
let m=Math.floor((remaining%3600000)/60000);
let s=Math.floor((remaining%60000)/1000);
timer.textContent=`Next crate in ${h}h ${m}m ${s}s`;
}
setInterval(updateTimer,1000);

/* spin */
function spinAnimation(callback){
let items=loot.map(l=>l.item);
let count=0;
let spin=setInterval(()=>{
spinner.textContent=items[Math.floor(Math.random()*items.length)];
count++;
if(count>20){clearInterval(spin);callback();}
},100);
}

/* open crate */
function openCrate(){
const last=localStorage.getItem("crateTime");
if(last && Date.now()-last<86400000){updateTimer();return;}

spinAnimation(()=>{
const reward=pickItem();
const code=makeCode(reward.item,reward.rarity);
lastCode=code;
localStorage.setItem("crateTime",Date.now());

let cls=
reward.rarity==="Common"?"common":
reward.rarity==="Uncommon"?"uncommon":
reward.rarity==="Rare"?"rare":
reward.rarity==="Ultra Rare"?"ultra":"legendary";

crateResult.innerHTML=
`üéâ You got: <span class="${cls}">${reward.item}</span>
<br><br>Code:<br>${code}`;

copyBtn.style.display="block";
submitBtn.style.display="block";
updateTimer();
});
}

/* copy code */
copyBtn.onclick=()=>{
navigator.clipboard.writeText(lastCode);
alert("Code copied!");
};

/* submit claim */
const SCRIPT_URL = "https://script.google.com/macros/s/AKfycbxwzBQxqq4U2De5tbbEELIsQen5l4WHHiCVw_teaqYq9VVPXmYXpR_x9t5SfhbcmlMl/exec"; // <-- replace with your Apps Script URL

submitBtn.onclick = async () => {
  const username = prompt("Enter your Minecraft username to claim:");
  if(!username) return;

  // Extract item & rarity from lastCode
  const rewardText = crateResult.textContent.match(/You got: (.+?)Code/);
  if(!rewardText) return alert("Error detecting reward.");
  const rewardItem = rewardText[1].trim();
  const rarityMatch = lastCode.match(/HEL-\d{6}-([^-]+)-/);
  const rewardRarity = rarityMatch ? rarityMatch[1] : "Unknown";

  try {
    const res = await fetch(SCRIPT_URL, {
      method: "POST",
      body: JSON.stringify({
        code: lastCode,
        item: rewardItem,
        rarity: rewardRarity,
        player: username
      })
    });

    const data = await res.json();
    if(data.status === "duplicate"){
      alert("‚ùå This code was already claimed!");
    } else if(data.status === "success"){
      alert("‚úÖ Claim submitted! Staff will verify.");
      submitBtn.style.display = "none";
    } else {
      alert("‚ö† Something went wrong.");
    }

  } catch(err){
    alert("‚ö† Could not connect to the database.");
  }
};

updateTimer();
</script>

</body>
</html>


