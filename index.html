<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8" />
<meta name="viewport" content="width=device-width, initial-scale=1.0" />
<title>HelvornSMP ‚Ä¢ Anarchy Survival</title>

<meta name="description" content="HelvornSMP ‚Äî Java & Bedrock anarchy survival. Join the community and play with crossplay support." />
<meta property="og:title" content="HelvornSMP ‚Ä¢ Anarchy Survival" />
<meta property="og:description" content="Java & Bedrock anarchy survival server. True anarchy, active admins." />
<meta property="og:type" content="website" />
<meta name="theme-color" content="#0b0b0b" />
<link rel="manifest" href="manifest.json">

<style>
:root{
  --bg:#0b0b0b;
  --card:#141414;
  --accent:#c9b458;
  --text:#eaeaea;
  --muted:#a0a0a0;
}

/* Light theme overrides */
[data-theme="light"]{
  --bg:#ffffff;
  --card:#f6f6f6;
  --accent:#c9b458;
  --text:#111111;
  --muted:#444444;
}

/* Skip link for keyboard users */
.skip-link{position:absolute;left:-999px;top:auto;width:1px;height:1px;overflow:hidden}
.skip-link:focus{left:10px;top:10px;width:auto;height:auto;padding:8px 12px;background:#000;color:#fff;border-radius:6px;z-index:9999}

*{box-sizing:border-box;margin:0;padding:0;}

body{
  background:radial-gradient(circle at top,#1a1a1a,var(--bg));
  color:var(--text);
  font-family:system-ui;
  overflow-x:hidden;
  position:relative;
  z-index:1;
}

/* CANVAS BACKGROUND */
#particleCanvas{
  position:fixed;
  top:0;
  left:0;
  width:100%;
  height:100%;
  z-index:-1;
}

header{
  min-height:100vh;
  display:flex;
  align-items:center;
  justify-content:center;
  text-align:center;
  padding:40px 20px;
}

.hero h1{
  font-size:clamp(3rem,8vw,5rem);
  color:var(--accent);
}

.hero p{color:var(--muted);margin:15px 0;}

.buttons{
  display:flex;
  gap:15px;
  justify-content:center;
  flex-wrap:wrap;
}

.btn{
  padding:14px 28px;
  border-radius:10px;
  font-weight:600;
  cursor:pointer;
  border:none;
  transition:0.3s;
}

.btn:hover{
  transform:scale(1.05);
}

.primary{
  background:var(--accent);
  color:black;
}

.secondary{
  border:2px solid var(--accent);
  color:var(--accent);
  background:none;
}

/* Admin button */
.admin-btn{
  margin-top:15px;
  background:var(--accent);
  color:black;
  border:none;
  padding:14px 28px;
  border-radius:10px;
  font-weight:bold;
  cursor:pointer;
  transition:0.3s;
}
.admin-btn:hover{
  transform:scale(1.05);
  background:#ffd633;
}

section{
  padding:80px 20px;
  display:flex;
  justify-content:center;
}

.container{
  max-width:1100px;
  width:100%;
  display:grid;
  grid-template-columns:repeat(auto-fit,minmax(260px,1fr));
  gap:20px;
}

.card{
  background:linear-gradient(180deg,#191919,var(--card));
  border-radius:18px;
  padding:25px;
  box-shadow:0 10px 30px rgba(0,0,0,.4);
  text-align:center;
}

.card h2{color:var(--accent);margin-bottom:10px;}
.card p,.card li{color:var(--muted);font-size:.95rem;}
ul{padding-left:18px;text-align:left;}

.ip-box{
  background:linear-gradient(135deg, rgba(201,180,88,0.1), rgba(201,180,88,0.05));
  border:1px solid rgba(201,180,88,0.3);
  padding:20px;
  border-radius:14px;
  margin-top:10px;
  font-family:monospace;
  color:var(--accent);
  font-size:0.95rem;
  font-weight:600;
  box-shadow:0 4px 15px rgba(201,180,88,0.1);
  transition:0.3s;
  word-break:break-all;
  line-height:1.6;
}

.ip-box:hover{
  border-color:var(--accent);
  box-shadow:0 6px 20px rgba(201,180,88,0.2);
  transform:translateY(-2px);
}

/* crate */
.crateBtn{
  margin-top:15px;
  width:100%;
  padding:12px;
  font-weight:bold;
  background:var(--accent);
  color:black;
  border:none;
  border-radius:10px;
  cursor:pointer;
  transition:0.3s;
}

.crateBtn:hover{
  transform:scale(1.02);
}

.copyBtn{
  margin-top:10px;
  width:100%;
  padding:10px;
  border-radius:10px;
  border:2px solid var(--accent);
  background:none;
  color:var(--accent);
  cursor:pointer;
  transition:0.3s;
}

.copyBtn:hover{
  background:var(--accent);
  color:black;
}

.spinner{
  height:22px;
  margin:10px 0;
}

/* rarity colors */
.common{color:#bbb;}
.uncommon{color:#55ff55;}
.rare{color:#55ffff;}
.ultra{color:#ff55ff;}
.legendary{color:#ffaa00;}

footer{
  text-align:center;
  padding:30px;
  color:var(--muted);
  border-top:1px solid #222;
}

/* About Me Card */
#aboutMeCard p {
  line-height:1.5;
  text-align:left;
}

/* FAQ details */
details{background:linear-gradient(180deg,rgba(255,255,255,0.02),transparent);padding:10px;border-radius:10px;margin-bottom:10px}
summary{cursor:pointer;font-weight:700;color:var(--accent);outline:none}
details p{color:var(--muted);margin-top:8px}
</style>
</head>

<body>

<canvas id="particleCanvas"></canvas>

<a class="skip-link" href="#main">Skip to content</a>

<header>
<div class="hero">
<h1>HELVORNSMP</h1>
<p>Java & Bedrock ‚Ä¢ Anarchy Survival ‚Ä¢ No Hacks</p>

<div class="buttons">
<a class="btn primary" href="#join">Join Server</a>
<a class="btn secondary" href="https://discord.gg/4H3Cgj77DH" target="_blank">Discord</a>
</div>

<!-- Admin button -->
<a href="admin.html"><button class="admin-btn">üõ° Admin Panel</button></a>

<!-- Theme toggle -->
<div style="margin-top:14px;">
  <button id="themeToggle" class="btn secondary" aria-pressed="false">Toggle Theme</button>
</div>

<div style="margin-top:30px;">
<strong>Server Status:</strong>
<div id="status" style="margin-top:10px;color:var(--accent)" aria-live="polite">Checking‚Ä¶</div>
</div>

</div>
</header>
 
<section id="join" role="region" aria-label="Join Server" tabindex="-1">
<div class="container">

<div class="card">
<h2>Server Info</h2>
<p>Pure anarchy survival. Griefing allowed. No hacking.</p>

<div class="ip-box">Java IP: <span id="java-ip">helvornsmp.playserver.pro</span></div>
<button class="btn secondary" onclick="copyIP('java-ip')">Copy Java IP</button>

<div class="ip-box" style="margin-top:15px;">Bedrock: <span id="bedrock-ip">helvornsmp.playserver.pro:35098</span></div>
<button class="btn secondary" onclick="copyIP('bedrock-ip')">Copy Bedrock</button>
</div>

<div class="card">
<h2>Why Helvorn?</h2>
<ul>
<li>Java + Bedrock Crossplay</li>
<li>Cracked Support</li>
<li>Active Admins</li>
<li>True Anarchy</li>
</ul>
</div>

<div class="card">
<h2>How To Start Server</h2>
<ul>
<li>Try joining</li>
<li>Cancel connection</li>
<li>Wait for server to wake</li>
<li>Join again</li>
</ul>
</div>

<!-- CRATE CARD -->
<div class="card">
<h2>üéÅ Crate (Every 4 Hours)</h2>
<button class="crateBtn" onclick="openCrate()">Open Crate</button>
<div class="spinner" id="spinner"></div>
<p id="crateResult"></p>
<button class="copyBtn" id="copyBtn" style="display:none;" onclick="copyCrateCode()">Copy Code</button>
<p id="timer"></p>
</div>

<!-- ABOUT ME CARD -->
<div class="card" id="aboutMeCard">
<h2>About Me</h2>
<p>
I am a coder and developer with a passion for creating and building things that people enjoy.
I love entertaining others and sharing knowledge to help others pursue their goals and accomplish tasks in life.
I enjoy learning new technologies, exploring creative ideas, and turning them into real projects.
Above all, I strive to be kind, supportive, and encouraging to everyone I meet, whether online or in real life.
</p>
</div>

<!-- FAQ CARD -->
<div class="card" id="faqCard">
  <h2>FAQ</h2>
  <details>
    <summary>How do I join the server?</summary>
    <p>Use the Java IP <strong>helvornsmp.playserver.pro</strong> or Bedrock at <strong>helvornsmp.playserver.pro:35098</strong>. If the server is sleeping, try joining twice ‚Äî it may take a moment to wake.</p>
  </details>
  <details>
    <summary>What are the rules?</summary>
    <p>This is a true anarchy server: griefing is allowed and hacking is not permitted. Staff reserves the right to act on serious abuse.</p>
  </details>
  <details>
    <summary>How do crates work?</summary>
    <p>Open the "Crate (Every 4 Hours)" card to receive a reward every 4 hours and a redeemable code. You can copy the code and submit it for manual verification by staff.</p>
  </details>
  <details>
    <summary>How do I report bugs or cheaters?</summary>
    <p>Join our Discord via the link above and open a report in the appropriate channel ‚Äî include evidence and timestamps when possible.</p>
  </details>
</div>

</div>
</section>

<footer>
¬© 2025 HelvornSMP
</footer>

<script>
/* ============================================
   PARTICLE SYSTEM
   ============================================ */
const canvas = document.getElementById("particleCanvas");
const ctx = canvas.getContext("2d");

function resize(){
  canvas.width = window.innerWidth;
  canvas.height = window.innerHeight;
}
resize();
window.addEventListener("resize", resize);

let mouse = {x:null,y:null};
window.addEventListener("mousemove", e=>{
  mouse.x=e.x;
  mouse.y=e.y;
});

let particles=[];
for(let i=0;i<120;i++){
  particles.push({
    x:Math.random()*canvas.width,
    y:Math.random()*canvas.height,
    size:Math.random()*2+1,
    vx:(Math.random()-0.5)*0.6,
    vy:(Math.random()-0.5)*0.6
  });
}

function animate(){
  ctx.clearRect(0,0,canvas.width,canvas.height);

  particles.forEach(p=>{
    p.x+=p.vx;
    p.y+=p.vy;

    // Bounce off edges
    if(p.x<0||p.x>canvas.width)p.vx*=-1;
    if(p.y<0||p.y>canvas.height)p.vy*=-1;

    ctx.beginPath();
    ctx.arc(p.x,p.y,p.size,0,Math.PI*2);
    ctx.shadowBlur=18;
    ctx.shadowColor="#c9b458";
    ctx.fillStyle="#ffd95e";
    ctx.fill();
  });

  requestAnimationFrame(animate);
}
animate();

/* ============================================
   THEME TOGGLE
   ============================================ */
const themeToggle = document.getElementById('themeToggle');
const currentTheme = localStorage.getItem('theme') || 'dark';

if(currentTheme === 'light'){
  document.documentElement.setAttribute('data-theme', 'light');
  themeToggle.setAttribute('aria-pressed', 'true');
}

themeToggle.addEventListener('click', function(){
  let theme = document.documentElement.getAttribute('data-theme');
  if(theme === 'light'){
    document.documentElement.removeAttribute('data-theme');
    localStorage.setItem('theme', 'dark');
    themeToggle.setAttribute('aria-pressed', 'false');
  } else {
    document.documentElement.setAttribute('data-theme', 'light');
    localStorage.setItem('theme', 'light');
    themeToggle.setAttribute('aria-pressed', 'true');
  }
});

/* ============================================
   SERVER STATUS CHECK
   ============================================ */
async function checkServerStatus(){
  const statusDiv = document.getElementById('status');
  statusDiv.innerHTML = 'üîÑ Checking...';
  
  try {
    const response = await fetch('https://api.mcsrvstat.us/3/helvornsmp.playserver.pro', {
      method: 'GET',
      headers: {
        'Accept': 'application/json'
      }
    });
    
    if(!response.ok){
      throw new Error('API request failed');
    }
    
    const data = await response.json();
    console.log('Server data:', data); // Debug log
    
    if(data.online === true){
      const playersOnline = data.players?.online || 0;
      const playersMax = data.players?.max || 0;
      statusDiv.innerHTML = `üü¢ Online ‚Ä¢ ${playersOnline}/${playersMax} players`;
    } else {
      statusDiv.innerHTML = 'üî¥ Offline or Sleeping';
    }
  } catch(error){
    console.error('Status check error:', error);
    // Fallback: Show manual check option
    statusDiv.innerHTML = '‚ö†Ô∏è Status unavailable ‚Ä¢ <a href="https://mcsrvstat.us/server/helvornsmp.playserver.pro" target="_blank" style="color:var(--accent);text-decoration:underline;">Check manually</a>';
  }
}

checkServerStatus();
setInterval(checkServerStatus, 60000);

/* ============================================
   COPY IP FUNCTION
   ============================================ */
function copyIP(elementId){
  const ipText = document.getElementById(elementId).textContent;
  navigator.clipboard.writeText(ipText).then(()=>{
    alert('IP copied to clipboard!');
  }).catch(err=>{
    console.error('Failed to copy:', err);
  });
}

/* ============================================
   DAILY CRATE SYSTEM
   ============================================ */
const ADMIN_BYPASS_CODE = "HelvornSMP2025"; // Same as admin panel password

const rewards = [
  // TRASH ITEMS (35% chance) - Useless junk
  {name:'Dirt Block',rarity:'common',class:'common'},
  {name:'Cobblestone',rarity:'common',class:'common'},
  {name:'Rotten Flesh',rarity:'common',class:'common'},
  {name:'Wooden Hoe',rarity:'common',class:'common'},
  {name:'Poisonous Potato',rarity:'common',class:'common'},
  {name:'Wooden Sword',rarity:'common',class:'common'},
  {name:'Leather Helmet',rarity:'common',class:'common'},
  
  // LOW TIER (30% chance) - Basic useful items
  {name:'Iron Ingot',rarity:'common',class:'common'},
  {name:'Iron Sword',rarity:'common',class:'common'},
  {name:'Iron Pickaxe',rarity:'common',class:'common'},
  {name:'Iron Axe',rarity:'common',class:'common'},
  {name:'Golden Apple',rarity:'common',class:'common'},
  {name:'Ender Pearl',rarity:'common',class:'common'},
  {name:'Bread',rarity:'common',class:'common'},
  {name:'Bow',rarity:'common',class:'common'},
  {name:'Arrow (64)',rarity:'common',class:'common'},
  
  // MID TIER (20% chance) - Good items
  {name:'Diamond',rarity:'uncommon',class:'uncommon'},
  {name:'Emerald',rarity:'uncommon',class:'uncommon'},
  {name:'Diamond Sword',rarity:'uncommon',class:'uncommon'},
  {name:'Diamond Pickaxe',rarity:'uncommon',class:'uncommon'},
  {name:'Diamond Axe',rarity:'uncommon',class:'uncommon'},
  {name:'Enchanted Golden Apple',rarity:'uncommon',class:'uncommon'},
  {name:'Ender Chest',rarity:'uncommon',class:'uncommon'},
  {name:'TNT (16)',rarity:'uncommon',class:'uncommon'},
  
  // HIGH TIER (10% chance) - Great items
  {name:'Diamond Helmet',rarity:'rare',class:'rare'},
  {name:'Diamond Chestplate',rarity:'rare',class:'rare'},
  {name:'Diamond Leggings',rarity:'rare',class:'rare'},
  {name:'Diamond Boots',rarity:'rare',class:'rare'},
  {name:'Shulker Box',rarity:'rare',class:'rare'},
  {name:'Trident',rarity:'rare',class:'rare'},
  {name:'Crossbow',rarity:'rare',class:'rare'},
  {name:'Totem of Undying',rarity:'rare',class:'rare'},
  
  // EPIC TIER (4% chance) - Netherite gear
  {name:'Netherite Ingot',rarity:'ultra',class:'ultra'},
  {name:'Netherite Sword',rarity:'ultra',class:'ultra'},
  {name:'Netherite Pickaxe',rarity:'ultra',class:'ultra'},
  {name:'Netherite Axe',rarity:'ultra',class:'ultra'},
  {name:'Netherite Helmet',rarity:'ultra',class:'ultra'},
  {name:'Netherite Chestplate',rarity:'ultra',class:'ultra'},
  {name:'Netherite Leggings',rarity:'ultra',class:'ultra'},
  {name:'Netherite Boots',rarity:'ultra',class:'ultra'},
  {name:'Elytra',rarity:'ultra',class:'ultra'},
  {name:'Ancient Debris',rarity:'ultra',class:'ultra'},
  
  // LEGENDARY (1% chance) - Insanely rare
  {name:'Nether Star',rarity:'legendary',class:'legendary'},
  {name:'Dragon Egg',rarity:'legendary',class:'legendary'},
  {name:'Beacon',rarity:'legendary',class:'legendary'},
  {name:'Enchanted Book (Mending)',rarity:'legendary',class:'legendary'},
  {name:'Enchanted Book (Fortune III)',rarity:'legendary',class:'legendary'},
  {name:'Enchanted Book (Silk Touch)',rarity:'legendary',class:'legendary'},
  {name:'Enchanted Book (Sharpness V)',rarity:'legendary',class:'legendary'},
  {name:'Enchanted Book (Protection IV)',rarity:'legendary',class:'legendary'},
  {name:'Enchanted Book (Unbreaking III)',rarity:'legendary',class:'legendary'},
  {name:'Netherite Block',rarity:'legendary',class:'legendary'}
];

let generatedCode = '';

// Check if user is admin (no timer)
function isAdmin(){
  return localStorage.getItem('adminBypass') === ADMIN_BYPASS_CODE;
}

// Admin bypass toggle (hidden feature)
window.enableAdminMode = function(code){
  if(code === ADMIN_BYPASS_CODE){
    localStorage.setItem('adminBypass', code);
    console.log('Admin mode enabled - No crate timer');
    updateTimer();
    return true;
  }
  return false;
}

window.disableAdminMode = function(){
  localStorage.removeItem('adminBypass');
  console.log('Admin mode disabled');
  updateTimer();
}

function openCrate(){
  // Skip timer check if admin
  if(!isAdmin()){
    const lastOpen = localStorage.getItem('lastCrateOpen');
    const now = Date.now();
    
    // 4 hours = 14400000 milliseconds
    if(lastOpen && (now - lastOpen) < 14400000){
      const timeLeft = 14400000 - (now - lastOpen);
      const hours = Math.floor(timeLeft / 3600000);
      const minutes = Math.floor((timeLeft % 3600000) / 60000);
      document.getElementById('crateResult').innerHTML = `‚è≥ Come back in ${hours}h ${minutes}m`;
      return;
    }
  }
  
  
  const spinner = document.getElementById('spinner');
  spinner.innerHTML = 'üéÅ Opening...';
  
  setTimeout(()=>{
    const roll = Math.random() * 100; // 0-100
    let reward;
    
    // TRASH ITEMS - 35% (0-35)
    if(roll < 35){
      const trashItems = rewards.filter(r => ['Dirt Block','Cobblestone','Rotten Flesh','Wooden Hoe','Poisonous Potato','Wooden Sword','Leather Helmet'].includes(r.name));
      reward = trashItems[Math.floor(Math.random() * trashItems.length)];
    }
    // LOW TIER - 30% (35-65)
    else if(roll < 65){
      const lowTier = rewards.filter(r => r.rarity === 'common' && !['Dirt Block','Cobblestone','Rotten Flesh','Wooden Hoe','Poisonous Potato','Wooden Sword','Leather Helmet'].includes(r.name));
      reward = lowTier[Math.floor(Math.random() * lowTier.length)];
    }
    // MID TIER - 20% (65-85)
    else if(roll < 85){
      const midTier = rewards.filter(r => r.rarity === 'uncommon');
      reward = midTier[Math.floor(Math.random() * midTier.length)];
    }
    // HIGH TIER - 10% (85-95)
    else if(roll < 95){
      const highTier = rewards.filter(r => r.rarity === 'rare');
      reward = highTier[Math.floor(Math.random() * highTier.length)];
    }
    // EPIC TIER - 4% (95-99)
    else if(roll < 99){
      const epicTier = rewards.filter(r => r.rarity === 'ultra');
      reward = epicTier[Math.floor(Math.random() * epicTier.length)];
    }
    // LEGENDARY - 1% (99-100)
    else {
      const legendary = rewards.filter(r => r.rarity === 'legendary');
      reward = legendary[Math.floor(Math.random() * legendary.length)];
    }
    
    // NEW FORMAT: ITEM-NAME-XXXX (e.g., COMMON-A3F9, LEGENDARY-K7M2)
    const itemName = reward.name.replace(/ Crate Key$/i, '').replace(/\s+/g, '-').toUpperCase();
    const chars = 'ABCDEFGHIJKLMNOPQRSTUVWXYZ0123456789';
    let randomCode = '';
    for(let i = 0; i < 4; i++){
      randomCode += chars.charAt(Math.floor(Math.random() * chars.length));
    }
    generatedCode = `${itemName}-${randomCode}`;
    
    // Save code to localStorage for admin panel
    saveCodeToAdmin(generatedCode, reward);
    
    document.getElementById('crateResult').innerHTML = 
      `You got: <span class="${reward.class}">${reward.name}</span><br>Code: <strong>${generatedCode}</strong>`;
    
    document.getElementById('copyBtn').style.display = 'block';
    spinner.innerHTML = '';
    
    // Only set timer if not admin
    if(!isAdmin()){
      localStorage.setItem('lastCrateOpen', Date.now().toString());
    }
    updateTimer();
  }, 2000);
}

function saveCodeToAdmin(code, reward){
  // Get existing codes
  const codes = localStorage.getItem('crateCodes');
  const codesArray = codes ? JSON.parse(codes) : [];
  
  // Add new code
  codesArray.push({
    code: code,
    reward: reward.name,
    rarity: reward.rarity,
    timestamp: new Date().toISOString(),
    status: 'unclaimed',
    username: null,
    claimedAt: null
  });
  
  // Save back to localStorage
  localStorage.setItem('crateCodes', JSON.stringify(codesArray));
}

function copyCrateCode(){
  navigator.clipboard.writeText(generatedCode).then(()=>{
    alert('Code copied! Give it to an admin to claim your reward.');
  });
}

function updateTimer(){
  const lastOpen = localStorage.getItem('lastCrateOpen');
  const timerDiv = document.getElementById('timer');
  
  // Show admin status if enabled
  if(isAdmin()){
    timerDiv.innerHTML = 'üëë Admin Mode: No Timer';
    timerDiv.style.color = 'var(--accent)';
    return;
  }
  
  if(!lastOpen){
    timerDiv.innerHTML = 'Open your first crate!';
    return;
  }
  
  const now = Date.now();
  const timeLeft = 14400000 - (now - lastOpen); // 4 hours
  
  if(timeLeft <= 0){
    timerDiv.innerHTML = '‚úÖ Ready to open!';
    return;
  }
  
  const hours = Math.floor(timeLeft / 3600000);
  const minutes = Math.floor((timeLeft % 3600000) / 60000);
  const seconds = Math.floor((timeLeft % 60000) / 1000);
  
  timerDiv.innerHTML = `Next crate in: ${hours}h ${minutes}m ${seconds}s`;
}

updateTimer();
setInterval(updateTimer, 1000);
</script>

</body>
</html>
